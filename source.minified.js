const KG = 1_000;const carbonResponse = await Functions.makeHttpRequest({url: `https://nfe-service-hackathon-e1676ada9c11.herokuapp.com/v1/api/nfes/ncm/44011000/carbon-free-calculation`,method: `GET`,headers: {Accept: `application/json`,'Content-Type': `application/json`,},});if (carbonResponse.error) {throw new Error(JSON.stringify(carbonResponse));};const obj = carbonResponse.data[0];const product = obj.products[0];const carbonFootprint = JSON.parse(JSON.stringify(product.carbon_calculation));const result = {nfeId: obj.nfe_id,company: obj.company_name,taxIdentifier: obj.company_tax_identifier,carbonTonFactor: (carbonFootprint.emission_factor_by_ton_of_wood * KG),carbonFootprint: Math.trunc(carbonFootprint.emission_footprint * KG),carbonSaving: Math.trunc(carbonFootprint.emission_saving * KG),carbonFinalEmission: Math.trunc(carbonFootprint.final_emission_footprint * KG)};return Functions.encodeString(JSON.stringify(result));


// return Buffer.concat([Functions.encodeString(result.nfeId),Functions.encodeString(result.company),Functions.encodeString(result.taxIdentifier),Functions.encodeInt256(result.carbonTonFactor),Functions.encodeInt256(result.carbonFootprint),Functions.encodeInt256(result.carbonSaving),Functions.encodeInt256(result.carbonFinalEmission)]);